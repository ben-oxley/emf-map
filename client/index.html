<html>
  <head>
    
  </head>
  <body>
    
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <script>
      const layers = {
        Background: "background_",
        Slope: "slope",
        Hillshade: "hillshade",
        "Aerial Imagery": "ortho",
        Structures: "structures_",
        Paths: "paths_",
        "Buried Services": "services_",
        Water: "site_water_",
        DKs: "dk_",
        "NOC-Physical": "noc_",
        Power: "power_",
        Lighting: "lighting_",
        Villages: "villages_"
    };
    const effects = {

    }

function uuidv4() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'
    .replace(/[xy]/g, function (c) {
        const r = Math.random() * 16 | 0, 
            v = c == 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
    });
}

const url = "wss://e8c681f0b4ba40d78aad5ddb06840b9b.s1.eu.hivemq.cloud:8884/mqtt"
// Create an MQTT client instance
const options = {
  // Clean session
  clean: true,
  connectTimeout: 4000,
  // Authentication
  clientId: uuidv4(),
  username: 'emfmap',
  password: 'hA6H7AK&7J#fme#dmhe2',
}
const client  = mqtt.connect(url, options)
client.on('connect', function () {
  console.log('Connected')
  // Subscribe to a topic
  client.subscribe('test', function (err) {
    if (!err) {
      // Publish a message to a topic
      client.publish('test', 'Hello mqtt')
    }
  })
})

// Receive messages
client.on('message', function (topic, message) {
  // message is Buffer
  console.log(message.toString())
})
console.log("connecting....")

    </script>
  </body>
</html>
